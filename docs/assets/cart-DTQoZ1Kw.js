import{a as j,j as s,L as n,M as N,g as f,m as g}from"./vendor-react-ByWCwTGe.js";import{N as u,B as t}from"./navigation-zEZZyTH7.js";import{B as v}from"./back-button-BsgzHr5b.js";import{u as b,L as y}from"./index-B6S9AHpb.js";import{c as B}from"./staticData-BQiDjMPt.js";import"./vendor-DFV2lSuA.js";import"./vendor-animations-CMPFBS9o.js";function P(){const{data:i,isLoading:x}=j({queryKey:["/api/products/all"],queryFn:()=>B()}),{cartItems:c,isLoading:m,updateQuantity:l,removeFromCart:h}=b();if(x||m)return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(u,{}),s.jsx("div",{className:"container mx-auto px-4 pt-60",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(y,{size:"lg"}),s.jsx("p",{className:"mt-4 text-sm text-gray-500 font-light",children:"Загрузка корзины..."})]})})})]});const a=(c==null?void 0:c.map(e=>{const r=i==null?void 0:i.find(p=>p.id===e.productId);return r?{...e,product:r}:null}).filter(e=>e!==null))||[],o=a==null?void 0:a.reduce((e,r)=>e+Number(r.product.priceBYN)*r.quantity,0),d=a==null?void 0:a.reduce((e,r)=>e+Number(r.product.priceRUB)*r.quantity,0);return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(u,{}),s.jsx(v,{}),s.jsx("div",{className:"fixed inset-0 z-30 bg-background/80 backdrop-blur-sm transition-opacity duration-500",children:s.jsx("div",{className:"absolute inset-y-0 right-0 w-full md:w-[600px] bg-background shadow-lg transform transition-transform duration-500 ease-in-out",children:s.jsxs("div",{className:"container mx-auto px-4 pt-60 pb-12 h-full overflow-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Корзина"}),!a||a.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Ваша корзина пуста"}),s.jsx(n,{href:"/",children:s.jsx(t,{className:"text-white",style:{backgroundColor:"#ec4899"},children:"Продолжить покупки"})})]}):s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsx("div",{className:"md:col-span-2",children:a.map(e=>s.jsxs("div",{className:"flex gap-4 border-b py-4 transition-all duration-300 ease-in-out hover:bg-accent/5",children:[s.jsx(n,{href:`/product/${e.product.id}`,children:s.jsx("img",{src:e.product.image,alt:e.product.ProductName,className:"w-24 h-24 object-cover rounded transform transition-transform duration-300 hover:scale-105",loading:"lazy",decoding:"async",fetchPriority:"low"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(n,{href:`/product/${e.product.id}`,children:s.jsx("h3",{className:"font-medium hover:text-primary transition-colors",children:e.product.ProductName})}),s.jsxs("p",{className:"text-muted-foreground text-sm",children:["BYN ",e.product.priceBYN," / RUB ",e.product.priceRUB]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(t,{variant:"outline",size:"icon",onClick:()=>l(e.id,Math.max(0,e.quantity-1)),className:"transition-transform active:scale-95",children:s.jsx(N,{className:"h-4 w-4"})}),s.jsx("span",{className:"w-8 text-center",children:e.quantity}),s.jsx(t,{variant:"outline",size:"icon",onClick:()=>l(e.id,e.quantity+1),className:"transition-transform active:scale-95",children:s.jsx(f,{className:"h-4 w-4"})}),s.jsx(t,{variant:"ghost",size:"icon",className:"ml-auto text-destructive hover:bg-destructive/10 transition-colors",onClick:()=>h(e.id),children:s.jsx(g,{className:"h-4 w-4"})})]})]})]},e.id))}),s.jsxs("div",{className:"bg-card p-6 rounded-lg h-fit",children:[s.jsx("h2",{className:"text-lg font-medium mb-4",children:"Сумма заказа"}),s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("span",{children:"Подытог"}),s.jsxs("span",{children:["BYN ",o," / RUB ",d]})]}),s.jsx("div",{className:"border-t pt-4 mb-6",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Итого"}),s.jsxs("span",{children:["BYN ",o," / RUB ",d]})]})}),s.jsx(n,{href:"/checkout",children:s.jsx(t,{className:"w-full transition-transform hover:scale-[1.02] active:scale-[0.98] text-white",style:{backgroundColor:"#ec4899"},children:"Оформить заказ"})})]})]})]})})})]})}export{P as default};
