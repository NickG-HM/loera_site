import{b,j as e,q as f,I as w}from"./vendor-react-DD8gH1fO.js";import{N as y,B as i}from"./navigation-DMbotdId.js";import{B}from"./back-button-DhJtY3YG.js";import{u as v,a as C}from"./index-CTFy8oAW.js";import{C as u,a as x,b as m,c as p}from"./card-DNc968XG.js";import{c as $}from"./staticData-BQiDjMPt.js";function P(){const{data:t}=b({queryKey:["/api/products/all"],queryFn:()=>$()}),{cartItems:c}=v(),{toast:h}=C(),a=c==null?void 0:c.map(s=>({...s,product:t==null?void 0:t.find(r=>r.id===s.productId)})),n=a==null?void 0:a.reduce((s,r)=>s+Number(r.product.priceBYN)*r.quantity,0),d=a==null?void 0:a.reduce((s,r)=>s+Number(r.product.priceRUB)*r.quantity,0),l="elizz_16",j="elizz_16",o=()=>`Здравствуйте! Я хочу оформить заказ:

${a==null?void 0:a.map(r=>`${r.product.ProductName} - Количество: ${r.quantity} - BYN ${Number(r.product.priceBYN)*r.quantity} / RUB ${Number(r.product.priceRUB)*r.quantity}`).join(`
`)}

Итого: BYN ${n} / RUB ${d}`,N=()=>{const s=o(),r=encodeURIComponent(s);window.open(`https://t.me/${j}?text=${r}`,"_blank")},g=()=>{const s=o();navigator.clipboard.writeText(s).then(()=>{h({title:"Сообщение скопировано",description:"Текст заказа скопирован. Откроется Instagram - просто вставьте сообщение (Ctrl+V / Cmd+V)."}),window.open(`https://www.instagram.com/direct/t/${l}/`,"_blank")}).catch(()=>{alert(`Пожалуйста, скопируйте этот текст и отправьте в Instagram:

${s}`),window.open(`https://www.instagram.com/direct/t/${l}/`,"_blank")})};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(y,{}),e.jsx(B,{}),e.jsxs("div",{className:"container mx-auto px-4 pt-44 pb-12",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Оформление заказа"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(m,{children:"Сумма заказа"})}),e.jsxs(p,{children:[a==null?void 0:a.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:s.product.image,alt:s.product.ProductName,className:"w-12 h-12 object-cover rounded",loading:"lazy",decoding:"async",fetchPriority:"low"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.product.ProductName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Количество: ",s.quantity]})]})]}),e.jsxs("p",{className:"font-medium",children:["BYN ",Number(s.product.priceBYN)*s.quantity," / RUB ",Number(s.product.priceRUB)*s.quantity]})]},s.id)),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Итого:"}),e.jsxs("span",{children:["BYN ",n," / RUB ",d]})]})})]})]})}),e.jsx("div",{children:e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(m,{children:"Завершить заказ"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Чтобы завершить заказ, пожалуйста, свяжитесь с нами через Telegram или Instagram с деталями вашего заказа."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{onClick:N,className:"w-full flex items-center gap-2 text-white border-0",style:{backgroundColor:"#000000"},children:[e.jsx(f,{className:"h-5 w-5"}),"Заказать через Telegram"]}),e.jsxs(i,{onClick:g,className:"w-full flex items-center gap-2 text-white border-0",style:{backgroundColor:"#ec4899"},children:[e.jsx(w,{className:"h-5 w-5"}),"Заказать через Instagram"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"Мы ответим на ваше сообщение с:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Подтверждением заказа"}),e.jsx("li",{children:"Деталями оплаты"}),e.jsx("li",{children:"Информацией о доставке"}),e.jsx("li",{children:"Ориентировочным временем доставки"})]})]})]})]})})]})]})]})}export{P as default};
